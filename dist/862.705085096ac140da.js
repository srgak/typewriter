"use strict";(self.webpackChunktypewriter=self.webpackChunktypewriter||[]).push([[862],{1862:(Jt,w,c)=>{c.r(w),c.d(w,{WorkPlaceModule:()=>Ft});var l=c(9808),t=c(1223);let O=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez]]}),e})(),T=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez,O]]}),e})(),A=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez]]}),e})(),X=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez]]}),e})(),L=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez]]}),e})(),Z=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez,A,X,L]]}),e})();var K=c(7072);let D=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez,K.z]]}),e})(),v=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez]]}),e})(),Y=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez,v]]}),e})(),F=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez,D,Y,v]]}),e})(),J=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez,T,Z,F]]}),e})();var x=c(8542),m=c(8104),R=c(3481),h=c(1135),u=c(727),p=c(9300),I=c(8306);class W extends u.w0{constructor(r,n){super()}schedule(r,n=0){return this}}const b={setInterval(...e){const{delegate:r}=b;return((null==r?void 0:r.setInterval)||setInterval)(...e)},clearInterval(e){const{delegate:r}=b;return((null==r?void 0:r.clearInterval)||clearInterval)(e)},delegate:void 0};var z=c(8737);const k={now:()=>(k.delegate||Date).now(),delegate:void 0};class f{constructor(r,n=f.now){this.schedulerActionCtor=r,this.now=n}schedule(r,n=0,o){return new this.schedulerActionCtor(this,r).schedule(o,n)}}f.now=k.now;const N=new class j extends f{constructor(r,n=f.now){super(r,n),this.actions=[],this._active=!1,this._scheduled=void 0}flush(r){const{actions:n}=this;if(this._active)return void n.push(r);let o;this._active=!0;do{if(o=r.execute(r.state,r.delay))break}while(r=n.shift());if(this._active=!1,o){for(;r=n.shift();)r.unsubscribe();throw o}}}(class Q extends W{constructor(r,n){super(r,n),this.scheduler=r,this.work=n,this.pending=!1}schedule(r,n=0){if(this.closed)return this;this.state=r;const o=this.id,i=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(i,o,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this}requestAsyncId(r,n,o=0){return b.setInterval(r.flush.bind(r,this),o)}recycleAsyncId(r,n,o=0){if(null!=o&&this.delay===o&&!1===this.pending)return n;b.clearInterval(n)}execute(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const o=this._execute(r,n);if(o)return o;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(r,n){let i,o=!1;try{this.work(r)}catch(s){o=!0,i=s||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:r,scheduler:n}=this,{actions:o}=n;this.work=this.state=this.scheduler=null,this.pending=!1,(0,z.P)(o,this),null!=r&&(this.id=this.recycleAsyncId(n,r,null)),this.delay=null,super.unsubscribe()}}});var U=c(3532);function P(e=0,r,n=N){let o=-1;return null!=r&&((0,U.K)(r)?n=r:o=r),new I.y(i=>{let s=function E(e){return e instanceof Date&&!isNaN(e)}(e)?+e-n.now():e;s<0&&(s=0);let d=0;return n.schedule(function(){i.closed||(i.next(d++),0<=o?this.schedule(void 0,o):i.complete())},s)})}var M=c(5698);class y extends Audio{constructor(r,n){var o,i;super(r),this.settings=n,this.loop=(null===(o=this.settings)||void 0===o?void 0:o.infinite)||!1,this.playbackRate=(null===(i=this.settings)||void 0===i?void 0:i.speed)||1}reset(){this.pause(),this.currentTime=0}playWithInterval(r,n=1e3*this.duration){P(0,n).pipe((0,M.q)(r)).subscribe(()=>{console.log("play"),this.play()})}}const S=(e,r)=>P(0,r).pipe((0,M.q)(e));var a=c(1777);const $=(0,a.X$)("moveCarriage",[(0,a.SB)("from",(0,a.oB)({transform:"translateX(calc(50% - {{offsetCurrent}}px))"}),{params:{offsetCurrent:0}}),(0,a.SB)("to",(0,a.oB)({transform:"translateX(calc(50% - {{offsetStart}}px))"}),{params:{offsetStart:0}}),(0,a.eR)("from => to",(0,a.ru)([(0,a.IO)("@moveTrigger",[(0,a.pV)()]),(0,a.IO)("@movePaper",[(0,a.pV)()]),(0,a.jt)("{{duration}}s")]),{params:{duration:0}})]),V=(0,a.X$)("moveTrigger",[(0,a.SB)("from",(0,a.oB)({transform:"rotateY(0deg)"})),(0,a.SB)("to",(0,a.oB)({transform:"rotateY(90deg)"})),(0,a.eR)("from <=> to",[(0,a.jt)("0.15s ease-out")])]);var g=c(7579);let C=(()=>{class e{constructor(){this.nextSymbol=new g.x,this.nextLine=new g.x,this.isBack=new g.x,this.isClear=new g.x,this.movePaper=new g.x}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),B=(()=>{class e{constructor(n){this.elRef=n,this.el=n.nativeElement}onClick(){this.el.blur()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.SBq))},e.\u0275dir=t.lG2({type:e,selectors:[["","autoblurButton",""]],hostBindings:function(n,o){1&n&&t.NdJ("click",function(){return o.onClick()})}}),e})();function H(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){const s=t.CHM(n).$implicit;return t.oxw().onRotate(s)}),t._uU(1),t.qZA()}if(2&e){const n=r.$implicit;t.xp6(1),t.Oqu(n)}}let q=(()=>{class e{constructor(){this.onRotateWheel=new t.vpe,this.btnList=[-2,-1,1,2]}onRotate(n){this.onRotateWheel.emit(n)}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["typewriter-scroll-wheel"]],outputs:{onRotateWheel:"onRotateWheel"},decls:2,vars:1,consts:[["draggable","true",1,"wheel"],["type","button","class","wheel__btn","autoblurButton","",3,"click",4,"ngFor","ngForOf"],["type","button","autoblurButton","",1,"wheel__btn",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.YNc(1,H,2,1,"button",1),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngForOf",o.btnList))},directives:[l.sg,B],styles:["[_nghost-%COMP%]{position:absolute;left:0;width:50px;height:100%}.wheel[_ngcontent-%COMP%]{width:inherit;height:inherit;border:1px solid #0aa;display:flex;flex-direction:column}.wheel__btn[_ngcontent-%COMP%]{border:1px solid #a0a;height:25%;color:#fff}"]}),e})();var G=c(4004),tt=c(2495);const et=(0,a.X$)("movePaper",[(0,a.SB)("up",(0,a.oB)({transform:"translateY({{translateEnd}}px)"}),{params:{translateEnd:0}}),(0,a.eR)("down => up",(0,a.jt)("0.05s ease-out"))]);var nt=c(947);const ot=["paper"],rt=function(e){return{translateEnd:e}},at=function(e,r){return{value:e,params:r}};let it=(()=>{class e{constructor(n,o,i){this.info=n,this.renderer2=o,this.paperData=i,this.onGetSymbol=new t.vpe,this.offsetXStart=38,this.offsetXCurrent=this.offsetXStart,this.offsetYStart=60,this.offsetYCurrent=this.offsetYStart,this.translateY=0,this.subs=new u.w0,this.paperState="down",this.audioScrollPaper=new y("assets/audio/scroll-paper.mp3"),this.printNextSymbol=s=>{var d;const _={name:s,x:this.offsetXCurrent,y:this.offsetYCurrent};this.offsetXCurrent+=10,null===(d=this.ctx)||void 0===d||d.fillText(_.name,_.x,_.y),this.onGetSymbol.emit(_)},this.goToNextLine=()=>{this.offsetXCurrent=this.offsetXStart,this.offsetYCurrent+=20,this.translateY-=20,this.paperState="up"},this.goBack=()=>{this.offsetXCurrent-=10},this.clear=()=>{var s;this.ctx.clearRect(0,0,this.info.width,this.info.height),this.ctx.fillStyle=this.info.color,null===(s=this.ctx)||void 0===s||s.fillRect(0,0,this.info.width,this.info.height),this.ctx.fillStyle="black",this.offsetXCurrent=this.offsetXStart,this.offsetYCurrent=this.offsetYStart,this.translateY=0,this.renderer2.setStyle(this.paperEl,"transform",this.transformValue)},this.movePaper=s=>{S(Math.abs(s),200).pipe((0,G.U)(()=>s<0?-1:1)).subscribe(d=>{this.translateY-=20*d,this.offsetYCurrent+=20*d,this.renderer2.setStyle(this.paperEl,"transform",this.transformValue),this.audioScrollPaper.play()})}}get transformValue(){return`translateY(${this.translateY}px)`}movePaperDone(){this.paperState="down"}initPaper(n){this.paperEl=n.el,this.ctx=n.ctx}ngOnInit(){this.subs.add(this.paperData.nextSymbol.pipe((0,p.h)(n=>!!n)).subscribe(this.printNextSymbol)),this.subs.add(this.paperData.nextLine.subscribe(this.goToNextLine)),this.subs.add(this.paperData.isBack.pipe((0,p.h)(n=>!!n),(0,p.h)(()=>this.offsetXCurrent>=this.offsetXStart+10)).subscribe(this.goBack)),this.subs.add(this.paperData.isClear.subscribe(this.clear)),this.subs.add(this.paperData.movePaper.pipe((0,p.h)(n=>n>0?this.translateY>=-900:this.translateY<=0)).subscribe(this.movePaper))}ngOnDestroy(){this.subs.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(tt.z),t.Y36(t.Qsj),t.Y36(C))},e.\u0275cmp=t.Xpm({type:e,selectors:[["typewriter-paper"]],viewQuery:function(n,o){if(1&n&&t.Gf(ot,7),2&n){let i;t.iGM(i=t.CRH())&&(o.paperRef=i.first)}},outputs:{onGetSymbol:"onGetSymbol"},decls:1,vars:6,consts:[["paperReady","",1,"paper",3,"onReady"]],template:function(n,o){1&n&&(t.TgZ(0,"canvas",0),t.NdJ("onReady",function(s){return o.initPaper(s)})("@movePaper.done",function(){return o.movePaperDone()}),t.qZA()),2&n&&t.Q6J("@movePaper",t.WLB(3,at,o.paperState,t.VKq(1,rt,o.translateY)))},directives:[nt.Q],styles:['[_nghost-%COMP%]{display:block;width:100%;height:100%;position:relative;z-index:2;pointer-events:none}[_nghost-%COMP%]:before{content:"";position:absolute;top:100px;width:100%;height:900px;background:#000;z-index:1}.paper[_ngcontent-%COMP%]{position:absolute;left:0;right:0;margin:auto}'],data:{animation:[et]}}),e})(),st=(()=>{class e{constructor(n,o,i){this.data=n,this.elRef=o,this.paperData=i,this.offsetXStart=120,this.offsetXCurrent=this.offsetXStart,this.symbol=new h.X(""),this.nextLine=new h.X(!1),this.carriageEl=this.elRef.nativeElement,this.subs=new u.w0,this.carriageState="from",this.carriageTriggerState="from",this.audioReturnCarriage=new y("assets/audio/return-carriage.mp3",{speed:1.7}),this.audioEndCarriage=new y("assets/audio/end-carriage.mp3"),this.moveNext=()=>{var s,d;this.offsetXCurrent===this.borderIn&&this.onLimitPaper(),this.data.isDisable=this.offsetXCurrent>=this.borderOut,this.offsetXCurrent+=10,this.transform=this.transformValue,this.paperData.nextSymbol.next((null===(d=null===(s=this.data.targetKey)||void 0===s?void 0:s.symbol)||void 0===d?void 0:d[this.data.register.value])||"")},this.moveBack=()=>{this.offsetXCurrent-=10,this.transform=this.transformValue},this.resetCarriage=()=>{this.carriageState="to"}}get moveCarriageData(){return{value:this.carriageState,params:{offsetCurrent:this.offsetXCurrent,offsetStart:this.offsetXStart,duration:(this.offsetXCurrent-this.offsetXStart)/20*.2}}}moveCarriageDone(){this.offsetXCurrent=this.offsetXStart,this.carriageState="from"}get transformValue(){return`translateX(calc(50% - ${this.offsetXCurrent}px))`}onLimitPaper(){this.audioEndCarriage.play()}goToNextString(){this.resetCarriage(),this.carriageTriggerState="to",this.paperData.nextLine.next(!0),this.offsetXStart!==this.offsetXCurrent&&S((this.offsetXCurrent-this.offsetXStart)/20,200).subscribe(()=>{this.audioReturnCarriage.play()})}moveTriggerDone(){this.carriageTriggerState="from"}ngOnInit(){this.carriageWidth=this.carriageEl.clientWidth,this.borderOut=this.carriageWidth-160,this.borderIn=this.carriageWidth-200,this.transform=this.transformValue,this.subs.add(this.data.isTypeLetter.pipe((0,p.h)(n=>!!n)).subscribe(this.moveNext)),this.subs.add(this.paperData.isBack.pipe((0,p.h)(n=>!!n),(0,p.h)(()=>this.offsetXCurrent>=this.offsetXStart+10)).subscribe(this.moveBack)),this.subs.add(this.paperData.isClear.subscribe(this.resetCarriage))}ngOnDestroy(){this.subs.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m.D),t.Y36(t.SBq),t.Y36(C))},e.\u0275cmp=t.Xpm({type:e,selectors:[["typewriter-carriage"]],hostVars:3,hostBindings:function(n,o){1&n&&t.WFA("@moveCarriage.done",function(){return o.moveCarriageDone()}),2&n&&(t.d8E("@moveCarriage",o.moveCarriageData),t.Udp("transform",o.transform))},decls:4,vars:1,consts:[[1,"carriage-arm"],["type","button","autoblurButton","",1,"carriage-arm__trigger",3,"click"],[3,"onRotateWheel"],[3,"onGetSymbol"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return o.goToNextString()})("@moveTrigger.done",function(){return o.moveTriggerDone()}),t.qZA(),t.qZA(),t.TgZ(2,"typewriter-scroll-wheel",2),t.NdJ("onRotateWheel",function(s){return o.paperData.movePaper.next(s)}),t.qZA(),t.TgZ(3,"typewriter-paper",3),t.NdJ("onGetSymbol",function(s){return o.data.currentLetter.push(s)}),t.qZA()),2&n&&(t.xp6(1),t.Q6J("@moveTrigger",o.carriageTriggerState))},directives:[B,q,it],styles:['[_nghost-%COMP%]{display:block;width:1000px;height:100px;background:#333;transform:translate(50%);position:relative}[_nghost-%COMP%]:before, [_nghost-%COMP%]:after{content:"";position:absolute;width:100%;height:30px;z-index:1;pointer-events:none}[_nghost-%COMP%]:before{bottom:0;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,#000000 100%);z-index:3}[_nghost-%COMP%]:after{top:0;background:linear-gradient(0deg,rgba(0,0,0,0) 0%,#000000 100%);z-index:1}.carriage-arm[_ngcontent-%COMP%]{position:absolute;left:0;border:1px solid red;width:0;height:100%;perspective:1000px}.carriage-arm__trigger[_ngcontent-%COMP%]{position:absolute;top:0;right:100%;width:150px;height:20px;background:grey;transform-origin:right}'],data:{animation:[$,V]},changeDetection:0}),e})();const lt=(0,a.X$)("movePetal",[(0,a.SB)("up",(0,a.oB)({transform:"translateY(-18px)"})),(0,a.SB)("down",(0,a.oB)({transform:""})),(0,a.eR)("up <=> down",(0,a.jt)("0.05s ease-out"))]);let ct=(()=>{class e{constructor(){this.subs=new u.w0,this.onRotate=n=>{this.transform=`rotate(${n}deg)`}}ngOnInit(){this.subs.add(this.angle.subscribe(this.onRotate))}ngOnDestroy(){this.subs.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["typewriter-bobbin"]],hostVars:2,hostBindings:function(n,o){2&n&&t.Udp("transform",o.transform)},inputs:{angle:"angle"},decls:1,vars:0,consts:[[1,"bobbin"]],template:function(n,o){1&n&&t._UZ(0,"div",0)},styles:['[_nghost-%COMP%]{width:225px;height:225px;z-index:3}.bobbin[_ngcontent-%COMP%]{width:inherit;height:inherit;border:1px solid white;border-radius:50%;position:relative;background:#000}.bobbin[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:50%;width:10px;height:100%;background:red}']}),e})();const dt=(0,a.X$)("moveLigature",[(0,a.SB)("up",(0,a.oB)({transform:"rotateY(0deg)"})),(0,a.SB)("down",(0,a.oB)({transform:"rotateY(180deg)"})),(0,a.eR)("up => down",(0,a.jt)("0.01s 0.04s ease-out")),(0,a.eR)("down => up",(0,a.jt)("0.3s ease-out"))]),pt=function(e){return{transform:e}};let ut=(()=>{class e{constructor(){}ngOnInit(){const n=-150/this.totalLigatures;this.angle=this.data.code*n-n/2-15,this.transform=`rotate(${this.angle}deg)`,this.transformSymbol=`rotateY(180deg) rotateZ(${-this.angle}deg)`}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["typewriter-ligature"]],hostVars:2,hostBindings:function(n,o){2&n&&t.Udp("transform",o.transform)},inputs:{data:"data",totalLigatures:"totalLigatures"},decls:7,vars:8,consts:[[1,"ligature-bar"],[1,"ligature-bar__symbol",3,"ngStyle"],[1,"ligature-bar__down"],[1,"ligature-bar__up"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t.TgZ(2,"div",1),t.TgZ(3,"span",2),t._uU(4),t.qZA(),t.TgZ(5,"span",3),t._uU(6),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.Q6J("@moveLigature",t.lcZ(1,4,o.data.state)),t.xp6(2),t.Q6J("ngStyle",t.VKq(6,pt,o.transformSymbol)),t.xp6(2),t.hij(" ",null==o.data.symbol?null:o.data.symbol.down," "),t.xp6(2),t.hij(" ",null==o.data.symbol?null:o.data.symbol.up," "))},directives:[l.PC],pipes:[l.Ov],styles:["[_nghost-%COMP%]{width:100%;height:100%;border-radius:50%;position:absolute;display:flex;align-items:center;pointer-events:none;perspective:900px}.ligature-bar[_ngcontent-%COMP%]{width:149px;height:5px;border:1px solid #00a;position:absolute;right:calc(50% + 100px);transform-origin:126px center;display:flex;align-items:center}.ligature-bar__symbol[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;justify-content:space-between;text-align:center;position:absolute;left:-6px;bottom:-23.5px;margin:0 auto;font-size:14px;font-family:Courier New;padding:2px 2px 12px;border:1px solid grey}"],data:{animation:[dt]}}),e})();const ht=(0,a.X$)("moveTape",[(0,a.SB)("down",(0,a.oB)({clipPath:"polygon(\n        0% calc(({{order}} + 4) * 20px),\n        calc(50% - 20px) calc({{order}} * 20px),\n        calc(50% + 20px) calc({{order}} * 20px),\n        100% calc(({{order}} + 4) * 20px),\n        100% calc(({{order}} + 5) * 20px),\n        calc(50% + 20px) calc(({{order}} + 1) * 20px),\n        calc(50% - 20px) calc(({{order}} + 1) * 20px),\n        0% calc(({{order}} + 5) * 20px)\n      )"}),{params:{order:1}}),(0,a.SB)("up",(0,a.oB)({clipPath:"polygon(\n        0% calc(({{order}} + 4) * 20px),\n        calc(50% - 20px) calc(({{order}} - 1) * 20px),\n        calc(50% + 20px) calc(({{order}} - 1) * 20px),\n        100% calc(({{order}} + 4) * 20px),\n        100% calc(({{order}} + 5) * 20px),\n        calc(50% + 20px) calc({{order}} * 20px),\n        calc(50% - 20px) calc({{order}} * 20px),\n        0% calc(({{order}} + 5) * 20px)\n      )"}),{params:{order:1}}),(0,a.eR)("up <=> down",(0,a.jt)("0.05s ease-out"))]),ft=function(e){return{order:e}},gt=function(e,r){return{value:e,params:r}};function mt(e,r){if(1&e&&(t._UZ(0,"div",1),t.ALo(1,"async")),2&e){const n=r.$implicit,o=t.oxw();t.Tol("tape_"+n.color),t.Q6J("@moveTape",t.WLB(7,gt,t.lcZ(1,3,o.tapeState),t.VKq(5,ft,n.order)))}}let bt=(()=>{class e{constructor(){this.subs=new u.w0,this.tapeState=new h.X("down"),this.tapeList=[{order:1,color:"black"},{order:2,color:"red"}]}ngOnInit(){this.subs.add(this.pressed.subscribe(n=>{n?(this.audioTapePress=new y("assets/audio/keypress.mp3"),this.audioTapePress.play(),this.tapeState.next("up")):this.tapeState.next("down")}))}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["typewriter-tape"]],inputs:{pressed:"pressed"},decls:1,vars:1,consts:[["class","tape",3,"class",4,"ngFor","ngForOf"],[1,"tape"]],template:function(n,o){1&n&&t.YNc(0,mt,2,10,"div",0),2&n&&t.Q6J("ngForOf",o.tapeList)},directives:[l.sg],pipes:[l.Ov],styles:["[_nghost-%COMP%]{position:absolute;display:block;width:calc(100% - 265px);height:100%;left:50%;top:-57px;transform:translate(-50%);pointer-events:none}.tape[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.tape_black[_ngcontent-%COMP%]{background:#333}.tape_red[_ngcontent-%COMP%]{background:#a00}"],data:{animation:[ht]}}),e})();function yt(e,r){if(1&e&&t._UZ(0,"typewriter-ligature",4),2&e){const n=r.$implicit,o=t.oxw();t.Q6J("data",n)("totalLigatures",o.ligatureList.length)}}let _t=(()=>{class e{constructor(n){this.data=n,this.ligatureList=this.data.keyList.filter(o=>o.code).sort((o,i)=>o.code-i.code),this.bobbinAngle=new h.X(0),this.tapePressed=new h.X(!1),this.subs=new u.w0}ngOnInit(){this.subs.add(this.data.isTypeLetter.subscribe(n=>{var o;"letter"===(null===(o=this.data.targetKey)||void 0===o?void 0:o.type)&&(n&&this.bobbinAngle.next(this.bobbinAngle.value-1),this.tapePressed.next(n))}))}ngOnDestroy(){this.subs.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m.D))},e.\u0275cmp=t.Xpm({type:e,selectors:[["typewriter-mechanism"]],decls:6,vars:7,consts:[[3,"angle"],[1,"type-writer-ligature"],[3,"data","totalLigatures",4,"ngFor","ngForOf"],[3,"pressed"],[3,"data","totalLigatures"]],template:function(n,o){1&n&&(t._UZ(0,"typewriter-bobbin",0),t.TgZ(1,"div",1),t.ALo(2,"async"),t.YNc(3,yt,1,2,"typewriter-ligature",2),t.qZA(),t._UZ(4,"typewriter-bobbin",0),t._UZ(5,"typewriter-tape",3)),2&n&&(t.Q6J("angle",o.bobbinAngle),t.xp6(1),t.Q6J("@movePetal",t.lcZ(2,5,o.data.register)),t.xp6(2),t.Q6J("ngForOf",o.ligatureList),t.xp6(1),t.Q6J("angle",o.bobbinAngle),t.xp6(1),t.Q6J("pressed",o.tapePressed))},directives:[ct,l.sg,ut,bt],pipes:[l.Ov],styles:['[_nghost-%COMP%]{display:flex;align-items:flex-end;justify-content:space-between;padding:10px 20px 30px;position:relative;z-index:1;background:#0f0f0f}.type-writer-ligature[_ngcontent-%COMP%]{width:500px;height:500px;margin:auto;display:flex;border-radius:50%;pointer-events:none;position:absolute;left:0;right:0;bottom:50px;z-index:1}.type-writer-ligature[_ngcontent-%COMP%]:before{content:"";position:absolute;width:200px;height:200px;border-radius:50%;border:1px solid white;top:50%;left:50%;transform:translate(-50%,-50%)}'],data:{animation:[lt]},changeDetection:0}),e})(),Ct=(()=>{class e{constructor(){}isFreelyKey(n){switch(n){case"Enter":case"Backspace":return!0;default:return!1}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var wt=c(5748);const vt=(0,a.X$)("moveKey",[(0,a.SB)("up",(0,a.oB)({transform:"rotateX(0deg)",opacity:1})),(0,a.SB)("down",(0,a.oB)({transform:"rotateX(-20deg)",opacity:.8})),(0,a.eR)("up => down",(0,a.jt)("0.05s ease-out")),(0,a.eR)("down => up",(0,a.jt)("0.01s ease-out"))]);function xt(e,r){if(1&e&&(t.ynx(0),t.TgZ(1,"span",7),t._uU(2),t.qZA(),t.TgZ(3,"span",8),t._uU(4),t.qZA(),t.BQk()),2&e){const n=t.oxw(2);t.xp6(2),t.hij(" ",null==n.data.symbol?null:n.data.symbol.up," "),t.xp6(2),t.hij(" ",null==n.data.symbol?null:n.data.symbol.down," ")}}function kt(e,r){if(1&e&&t._uU(0),2&e){const n=t.oxw(2);t.hij(" ",null==n.data.symbol?null:n.data.symbol.up," ")}}function Pt(e,r){if(1&e&&(t.ynx(0),t.YNc(1,xt,5,2,"ng-container",5),t.YNc(2,kt,1,1,"ng-template",null,6,t.W1O),t.BQk()),2&e){const n=t.MAs(3),o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.isDifferentSymbols)("ngIfElse",n)}}function Mt(e,r){1&e&&(t.ynx(0),t._uU(1," \u041f\u0440\u043e\u0431\u0435\u043b "),t.BQk())}function St(e,r){1&e&&(t.ynx(0),t._uU(1," \u0428\u0438\u0444\u0442 "),t.BQk())}function Bt(e,r){1&e&&(t.ynx(0),t._uU(1," <- "),t.BQk())}const Ot=function(e,r,n,o,i){return{"keyboard-btn_row_1":e,"keyboard-btn_row_2":r,"keyboard-btn_row_3":n,"keyboard-btn_row_4":o,"keyboard-btn_row_5":i}},Tt=function(e,r,n){return{"keyboard-btn__platform_circle":e,"keyboard-btn__platform_shift":r,"keyboard-btn__platform_space":n}};let At=(()=>{class e{constructor(n,o){this.asyncPipe=n,this.duration=o,this.onPressed=new t.vpe,this.isDifferentSymbols=!1}keyPress(){"down"===this.asyncPipe.transform(this.data.state)?this.onPressed.emit(!0):this.onPressed.emit(!1)}onDown(){}onUp(){}ngOnInit(){var n,o;this.isDifferentSymbols=(null===(n=this.data.symbol)||void 0===n?void 0:n.up.toLowerCase())!==(null===(o=this.data.symbol)||void 0===o?void 0:o.down)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(l.Ov),t.Y36(wt.Z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["typewriter-keyboard-button"]],inputs:{data:"data"},outputs:{onPressed:"onPressed"},features:[t._Bn([l.Ov])],decls:9,vars:20,consts:[["type","button",1,"keyboard-btn",3,"ngClass","touchstart","touchend"],[1,"keyboard-btn__kernel"],[1,"keyboard-btn__platform",3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngIf","ngIfElse"],["letter",""],[1,"keyboard-btn__up"],[1,"keyboard-btn__down"]],template:function(n,o){1&n&&(t.TgZ(0,"button",0),t.NdJ("@moveKey.done",function(){return o.keyPress()})("touchstart",function(){return o.onDown()})("touchend",function(){return o.onUp()}),t.ALo(1,"async"),t._UZ(2,"div",1),t.TgZ(3,"div",2),t.ynx(4,3),t.YNc(5,Pt,4,2,"ng-container",4),t.YNc(6,Mt,2,0,"ng-container",4),t.YNc(7,St,2,0,"ng-container",4),t.YNc(8,Bt,2,0,"ng-container",4),t.BQk(),t.qZA(),t.qZA()),2&n&&(t.Q6J("ngClass",t.qbA(10,Ot,1===(null==o.data?null:o.data.row),2===(null==o.data?null:o.data.row),3===(null==o.data?null:o.data.row),4===(null==o.data?null:o.data.row),5===(null==o.data?null:o.data.row)))("@moveKey",t.lcZ(1,8,null==o.data?null:o.data.state)),t.xp6(3),t.Q6J("ngClass",t.kEZ(16,Tt,"letter"===(null==o.data?null:o.data.type)||"backspace"===(null==o.data?null:o.data.type),"shift"===(null==o.data?null:o.data.type),"space"===(null==o.data?null:o.data.type))),t.xp6(1),t.Q6J("ngSwitch",null==o.data?null:o.data.type),t.xp6(1),t.Q6J("ngSwitchCase","letter"),t.xp6(1),t.Q6J("ngSwitchCase","space"),t.xp6(1),t.Q6J("ngSwitchCase","shift"),t.xp6(1),t.Q6J("ngSwitchCase","backspace"))},directives:[l.mk,l.RF,l.n9,l.O5],pipes:[l.Ov],styles:['[_nghost-%COMP%]{position:relative;perspective:900px}[_nghost-%COMP%]:last-child{margin-right:0}.keyboard-btn[_ngcontent-%COMP%]{position:relative}.keyboard-btn__kernel[_ngcontent-%COMP%]{position:absolute;bottom:50%;left:50%;transform:translate(-50%);width:7px;height:80px;background:linear-gradient(90deg,rgba(0,0,0,0) 0%,#b8b8b8 50%,#000000 100%);z-index:-1}.keyboard-btn__kernel[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:0;left:0;width:100%;height:100%;background:linear-gradient(180deg,#000000 0%,rgba(0,0,0,0) 90%)}.keyboard-btn__platform[_ngcontent-%COMP%]{background:#000;border:3px solid #b8b8b8;color:#fff;font-size:22px;height:50px;display:flex;justify-content:center;align-items:center;position:relative}.keyboard-btn__platform_circle[_ngcontent-%COMP%]{width:50px;border-radius:50%}.keyboard-btn__platform_shift[_ngcontent-%COMP%]{width:100px;border-radius:20px}.keyboard-btn__platform_space[_ngcontent-%COMP%]{width:500px;border-radius:20px}.keyboard-btn__up[_ngcontent-%COMP%], .keyboard-btn__down[_ngcontent-%COMP%]{position:absolute}.keyboard-btn__up[_ngcontent-%COMP%]{top:0;right:12px;transform:scale(.8)}.keyboard-btn__down[_ngcontent-%COMP%]{bottom:0;left:14px}.keyboard-btn_row_1[_ngcontent-%COMP%]{transform-origin:center -30px}.keyboard-btn_row_1[_ngcontent-%COMP%]   .keyboard-btn__kernel[_ngcontent-%COMP%]{height:55px}.keyboard-btn_row_2[_ngcontent-%COMP%]{transform-origin:center -95px}.keyboard-btn_row_2[_ngcontent-%COMP%]   .keyboard-btn__kernel[_ngcontent-%COMP%]{height:120px}.keyboard-btn_row_3[_ngcontent-%COMP%]{transform-origin:center -160px}.keyboard-btn_row_3[_ngcontent-%COMP%]   .keyboard-btn__kernel[_ngcontent-%COMP%]{height:185px}.keyboard-btn_row_4[_ngcontent-%COMP%]{transform-origin:center -225px}.keyboard-btn_row_4[_ngcontent-%COMP%]   .keyboard-btn__kernel[_ngcontent-%COMP%]{height:250px}.keyboard-btn_row_5[_ngcontent-%COMP%]{transform-origin:center -290px}.keyboard-btn_row_5[_ngcontent-%COMP%]   .keyboard-btn__kernel[_ngcontent-%COMP%]{height:315px}'],data:{animation:[vt]}}),e})();function Xt(e,r){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"typewriter-keyboard-button",4),t.NdJ("onPressed",function(i){return t.CHM(n),t.oxw(2).onPressBtn(i)}),t.qZA(),t.BQk()}if(2&e){const n=r.$implicit;t.xp6(1),t.Q6J("data",n)}}function Lt(e,r){if(1&e&&(t.TgZ(0,"div",2),t.YNc(1,Xt,2,1,"ng-container",3),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Q6J("ngForOf",n)}}let Zt=(()=>{class e{constructor(n,o,i){this.data=n,this.methods=o,this.paperData=i,this.onPressKey=new t.vpe,this.keyState="up",this.keysLetter=[this.data.keyList.filter(s=>1===s.row),this.data.keyList.filter(s=>2===s.row),this.data.keyList.filter(s=>3===s.row),this.data.keyList.filter(s=>4===s.row),this.data.keyList.filter(s=>5===s.row)]}onKeyDown(n){var o;n.repeat||this.data.isDisable&&!this.methods.isFreelyKey(n.key)||(this.data.targetKey=this.getTargetKey(n.key),null===(o=this.data.targetKey)||void 0===o||o.state.next("down"))}onKeyUp(n){var o;this.data.targetKey=this.getTargetKey(n.key),null===(o=this.data.targetKey)||void 0===o||o.state.next("up")}getTargetKey(n){switch(n){case"Shift":case"Backspace":return this.data.keyList.find(o=>o.type===n.toLowerCase());default:return this.data.keyList.find(o=>{var i;return(null===(i=o.symbol)||void 0===i?void 0:i[this.data.register.value])===n})}}onPressBtn(n){var o;switch(null===(o=this.data.targetKey)||void 0===o?void 0:o.type){case"shift":this.data.register.next(n?"up":"down");break;case"space":default:this.data.isTypeLetter.next(n);break;case"backspace":this.paperData.isBack.next(n)}}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m.D),t.Y36(Ct),t.Y36(C))},e.\u0275cmp=t.Xpm({type:e,selectors:[["typewriter-keyboard"]],hostBindings:function(n,o){1&n&&t.NdJ("keydown",function(s){return o.onKeyDown(s)},!1,t.evT)("keyup",function(s){return o.onKeyUp(s)},!1,t.evT)},outputs:{onPressKey:"onPressKey"},decls:2,vars:1,consts:[[1,"keyboard"],["class","keyboard__row",4,"ngFor","ngForOf"],[1,"keyboard__row"],[4,"ngFor","ngForOf"],[3,"data","onPressed"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.YNc(1,Lt,2,1,"div",1),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngForOf",o.keysLetter))},directives:[l.sg,At],styles:['[_nghost-%COMP%]{display:block;position:relative;z-index:1;background:#000}.keyboard[_ngcontent-%COMP%]{position:relative;border-top:none;overflow:hidden;display:grid;grid-row-gap:15px;row-gap:15px;border-radius:0 0 80px 80px;background:#000;padding:30px 0 25px}.keyboard[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;border-radius:inherit;border:10px solid transparent;border-top:none;background:linear-gradient(180deg,#0f0f0f 40%,#b8b8b8 100%) border-box;-webkit-mask:linear-gradient(#fff 0 0) padding-box,linear-gradient(#fff 0 0);mask:linear-gradient(#fff 0 0) padding-box,linear-gradient(#fff 0 0);-webkit-mask-composite:destination-out;mask-composite:exclude}.keyboard__row[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;column-gap:20px;position:relative;font-size:0}.keyboard__row[_ngcontent-%COMP%]:first-child{z-index:5}.keyboard__row[_ngcontent-%COMP%]:nth-child(2){z-index:4}.keyboard__row[_ngcontent-%COMP%]:nth-child(3){z-index:3}.keyboard__row[_ngcontent-%COMP%]:nth-child(4){z-index:2}.keyboard__row[_ngcontent-%COMP%]:last-child{z-index:1}'],changeDetection:0}),e})(),Kt=(()=>{class e{constructor(n,o){this.data=n,this.modal=o}sendLetter(){this.data.currentLetter.length?this.modal.addModal("preview",this.data.currentLetter):this.modal.addModal("message","\u0412\u044b \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u043f\u0438\u0441\u0430\u043b\u0438!")}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m.D),t.Y36(R.Z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["typewriter-main"]],decls:5,vars:0,consts:[["type","button",1,"typewriter-send",3,"click"]],template:function(n,o){1&n&&(t._UZ(0,"typewriter-carriage"),t._UZ(1,"typewriter-mechanism"),t._UZ(2,"typewriter-keyboard"),t.TgZ(3,"button",0),t.NdJ("click",function(){return o.sendLetter()}),t._uU(4," \u041f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\n"),t.qZA())},directives:[st,_t,Zt],styles:["[_nghost-%COMP%]{position:fixed;bottom:0;left:0;right:0;width:1035px;margin:auto}.typewriter-send[_ngcontent-%COMP%]{color:#fff;position:fixed;bottom:0;right:0;padding:10px}"],changeDetection:0}),e})();const Dt=[{path:"",pathMatch:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["page-work-place"]],decls:1,vars:0,template:function(n,o){1&n&&t._UZ(0,"typewriter-main")},directives:[Kt],styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%}"]}),e})()}];let Yt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[x.Bz.forChild(Dt)],x.Bz]}),e})(),Ft=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.ez,Yt,J]]}),e})()}}]);